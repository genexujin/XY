package edu.hp.model.vo.query.conf;

import edu.hp.model.vo.query.conf.common.ConfRmConflictView;

import java.sql.Timestamp;

import java.util.Calendar;

import oracle.jbo.server.ViewObjectImpl;


// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Sun Jan 27 16:46:44 CST 2013
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class ConfRmConflictViewImpl extends ViewObjectImpl implements ConfRmConflictView {
    /**
     * This is the default constructor (do not remove).
     */
    public ConfRmConflictViewImpl() {
    }
    
    /**
     * return true if no conflict
     * @param actStartTime
     * @param actEndTime
     * @param clsRmId
     * @param actId
     * @return
     */
    public Boolean ifConflict(Timestamp actStartTime, Timestamp actEndTime, String clsRmId, String actId){
        
        System.err.println("inside vo...........");
        System.err.println(actStartTime);
        System.err.println(actEndTime);
        System.err.println(clsRmId);
        System.err.println(actId);
        
        try {
           
            if(actStartTime.equals(actEndTime)){                
                if (actEndTime != null) {
                    Calendar calendar = Calendar.getInstance();
                    calendar.setTimeInMillis(actEndTime.getTime());
                    calendar.set(Calendar.HOUR_OF_DAY, 23);
                    calendar.set(Calendar.MINUTE, 59);
                    calendar.set(Calendar.SECOND, 59);
                    actEndTime = new Timestamp(calendar.getTimeInMillis());
                }                      
            }
            
            ensureVariableManager().setVariableValue("endQueryTime", actEndTime);
            ensureVariableManager().setVariableValue("startQueryTime", actStartTime);
            ensureVariableManager().setVariableValue("confRoomId", clsRmId);
            ensureVariableManager().setVariableValue("actId", actId);
            
            setRangeSize(-1);
            executeQuery();
            if (first() !=null){
                return false;                
            }
        } catch (Exception e) {
            // TODO: Add catch code
            e.printStackTrace();
            return false;
        }
        return true;
    }
    

    /**
     * Returns the bind variable value for startQueryTime.
     * @return bind variable value for startQueryTime
     */
    public Timestamp getstartQueryTime() {
        return (Timestamp)getNamedWhereClauseParam("startQueryTime");
    }

    /**
     * Sets <code>value</code> for bind variable startQueryTime.
     * @param value value to bind as startQueryTime
     */
    public void setstartQueryTime(Timestamp value) {
        setNamedWhereClauseParam("startQueryTime", value);
    }

    /**
     * Returns the bind variable value for endQueryTime.
     * @return bind variable value for endQueryTime
     */
    public Timestamp getendQueryTime() {
        return (Timestamp)getNamedWhereClauseParam("endQueryTime");
    }

    /**
     * Sets <code>value</code> for bind variable endQueryTime.
     * @param value value to bind as endQueryTime
     */
    public void setendQueryTime(Timestamp value) {
        setNamedWhereClauseParam("endQueryTime", value);
    }

    /**
     * Returns the bind variable value for confRoomId.
     * @return bind variable value for confRoomId
     */
    public String getconfRoomId() {
        return (String)getNamedWhereClauseParam("confRoomId");
    }

    /**
     * Sets <code>value</code> for bind variable confRoomId.
     * @param value value to bind as confRoomId
     */
    public void setconfRoomId(String value) {
        setNamedWhereClauseParam("confRoomId", value);
    }

    /**
     * Returns the bind variable value for actId.
     * @return bind variable value for actId
     */
    public String getactId() {
        return (String)getNamedWhereClauseParam("actId");
    }

    /**
     * Sets <code>value</code> for bind variable actId.
     * @param value value to bind as actId
     */
    public void setactId(String value) {
        setNamedWhereClauseParam("actId", value);
    }

    /**
     * Returns the bind variable value for approved.
     * @return bind variable value for approved
     */
    public String getapproved() {
        return (String)getNamedWhereClauseParam("approved");
    }

    /**
     * Sets <code>value</code> for bind variable approved.
     * @param value value to bind as approved
     */
    public void setapproved(String value) {
        setNamedWhereClauseParam("approved", value);
    }
}
