package com.xy.scpms.model.reports;

import com.xy.scpms.model.reports.common.MonthlyEffectiveRpt;

import oracle.adf.share.ADFContext;

import oracle.adf.share.security.SecurityContext;

import oracle.jbo.server.ViewObjectImpl;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Tue Mar 20 21:31:33 CST 2012
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class MonthlyEffectiveRptImpl extends ViewObjectImpl implements MonthlyEffectiveRpt {
    /**
     * This is the default constructor (do not remove).
     */
    public MonthlyEffectiveRptImpl() {
    }

    public void runReport(String dept) {

        SecurityContext context = ADFContext.getCurrent().getSecurityContext();
        this.setApplyViewCriteriaNames(null);

        if (context.isUserInRole("design_director")) {
            
            this.applyViewCriteria(getViewCriteria("findByDept"));
            this.setdept(dept);
        } else if (context.isUserInRole("contractor") || context.isUserInRole("marketing_director") ||
                   context.isUserInRole("vip")) {
            
            //do nothing
        } else {
            
            this.applyViewCriteria(getViewCriteria("findByMgrId"));
            //value set by groovy expr inside the viewobject itself
        }

        this.executeQuery();

    }

    /**
     * Returns the variable value for MgrId.
     * @return variable value for MgrId
     */
    public String getMgrId() {
        return (String)ensureVariableManager().getVariableValue("MgrId");
    }

    /**
     * Sets <code>value</code> for variable MgrId.
     * @param value value to bind as MgrId
     */
    public void setMgrId(String value) {
        ensureVariableManager().setVariableValue("MgrId", value);
    }

    /**
     * Returns the variable value for dept.
     * @return variable value for dept
     */
    public String getdept() {
        return (String)ensureVariableManager().getVariableValue("dept");
    }

    /**
     * Sets <code>value</code> for variable dept.
     * @param value value to bind as dept
     */
    public void setdept(String value) {
        ensureVariableManager().setVariableValue("dept", value);
    }
}
